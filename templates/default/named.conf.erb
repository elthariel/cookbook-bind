# Generated by Chef for <%= node['fqdn'] %>
# Local modifications will be overwritten.
<% node['named']['included_files'].each do |file| -%>
include "<%= "#{node['named']['sysconfdir']}/#{file}" %>";
<% end -%>

<% unless node['named']['server'].empty? %>
<% node['named']['server'].each {|server_ip, options| %>
server <%= server_ip %> {
  <% options.each do |option| -%>
  <%= option %>
<% end -%>
};
<% } -%>
<% end -%>

<% each_resource('named_view', @views) do |view| %>

view "<%= view.name %>" {
<%   if view.clients %>
  match-clients {
<%     view.clients.each do |line| %>
    <%= line %>;
<%     end %>
  };
<%   end %>
<%#%>
<%   if view.destinations %>
  match-destinations {
<%     view.destinations.each do |line| %>
     <%= line %>;
<%     end %>
  };
<%   end %>
<%#%>
<% if view.recursion %>
  recursion yes;
<% end %>
<%#%>
<%   each_resource_with_property('named_zone', @zones, :view, view.name) do |zone| %>
  <%= render 'zone_clause.erb', variables: {zone: zone, node: node} %>
<%   end %>
<%#%>
<%   view.options.each do |opt| %>
  <%= opt %>;
<%   end %>

<%   node['named']['included_in_views_files'].each do |file| -%>
  include "<%= "#{node['named']['sysconfdir']}/#{file}" %>";
<%   end -%>

  zone "." IN {
    type hint;
    file "named.ca";
  };
};

<% end %>
